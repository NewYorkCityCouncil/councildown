---
output: github_document
always_allow_html: yes
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE}
library(tidyverse)
library(councildown)
library(leaflet)
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```
# councildown

The `councildown` package implements style guide compliant defaults for R Markdown documents, `ggplot2` plots, and `leaflet` maps.

## Installation

You can install the released version of `councildown` from GitHub

``` r
remotes::install_github("newyorkcitycouncil/councildown")
```

## Example

Note that the order of loading the libraries is important. Make sure to load `councildown` last. 

```{r dpi=300}
library(tidyverse)
library(councildown)
```

### ggplot2

On load, common `ggplot2` scale_* functions are overwritten with `scale_fill_nycc()` and `scale_color_nycc()`.

```{r dpi=300}
data.frame(x = rnorm(20), y = rnorm(20), z = c("a", "b")) %>%
  ggplot(aes(x, y, color = z)) +
 geom_point() +
 labs(title = "Test",
      subtitle = "Test",
      caption = "Test",
      color = "Legend",
      x = "Test a",
      y = "Test b") +
 theme_nycc() +
 scale_color_nycc()
```

Additionally, `theme_nycc()` has an argument `facet` for changing the theme to better fit faceted plots.

```{r dpi=300}
data.frame(x = rnorm(20), y = rnorm(20), z = c("a", "b")) %>%
  ggplot(aes(x, y, color = z)) +
 geom_point() +
 labs(title = "Test",
      subtitle = "Test",
      caption = "Test",
      color = "Legend",
      x = "Test a",
      y = "Test b") +
 facet_wrap(~z) +
 theme_nycc(facet=TRUE) +
 scale_color_nycc()
```

### leaflet

The function `addCouncilStyle()` sets the default view, zoom, and background. There is an additional option for `add_dists` to add map tiles and City Council district outlines and labels to `leaflet` maps. 

```{r screenshot.opts = list(vwidth = 1280, vheight = 900)}
library(leaflet)
leaflet() %>% 
  addCouncilStyle(add_dists = TRUE)
```

Additionally, use `mapshot` to save leaflet maps as a static png image. `mapshot()` overwrites `mapview::mapshot()` to force map saves with standardized width, height, and zoom. Use `mapview::mapshot` if you want the original `mapshot` function. 

```{r eval=FALSE}
map <- leaflet() %>% 
  addCouncilStyle(add_dists = TRUE)
mapshot(map, file = "map.png")
```

### R Markdown

The package includes an R Markdown template for writing Council reports. After installing the package, create a new report by choosing New > R Markdown > From Template > City Council Report in RStudio.
